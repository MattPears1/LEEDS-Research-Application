<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>6 Text Mining, Natural Language Processing, and Sentiment Analysis | Feasibility and Acceptance of chatbots embedded in healthcare curricula:</title>
<meta name="author" content="–">
<meta name="generator" content="bookdown 0.31 with bs4_book()">
<meta property="og:title" content="6 Text Mining, Natural Language Processing, and Sentiment Analysis | Feasibility and Acceptance of chatbots embedded in healthcare curricula:">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="6 Text Mining, Natural Language Processing, and Sentiment Analysis | Feasibility and Acceptance of chatbots embedded in healthcare curricula:">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="templates/bs4_style.css">
<link rel="stylesheet" href="templates/corrections.css">
<meta name="description" content="6.1 1 Reading in texts  6.1.1 1.1 txt files Here’s how you can read in one .txt file that is saved in the same location as this script (i.e. in the same folder on your computer): If you want to...">
<meta property="og:description" content="6.1 1 Reading in texts  6.1.1 1.1 txt files Here’s how you can read in one .txt file that is saved in the same location as this script (i.e. in the same folder on your computer): If you want to...">
<meta name="twitter:description" content="6.1 1 Reading in texts  6.1.1 1.1 txt files Here’s how you can read in one .txt file that is saved in the same location as this script (i.e. in the same folder on your computer): If you want to...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""><p><code>Feasibility and Acceptance of chatbots embedded in healthcare curricula</code>:</p></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to the CEPEH Data Analysis Site</a></li>
<li><a class="" href="introduction.html">Introduction</a></li>
<li><a class="" href="method.html"><span class="header-section-number">1</span> Method</a></li>
<li><a class="" href="rmd-basics.html"><span class="header-section-number">2</span> Results</a></li>
<li><a class="" href="cites-and-refs.html"><span class="header-section-number">3</span> Training Event Results</a></li>
<li><a class="" href="overall-training-events-evalaution.html"><span class="header-section-number">4</span> Overall Training Events Evalaution</a></li>
<li><a class="" href="Discussion.html"><span class="header-section-number">5</span> Discussion</a></li>
<li><a class="active" href="text-mining-natural-language-processing-and-sentiment-analysis.html"><span class="header-section-number">6</span> Text Mining, Natural Language Processing, and Sentiment Analysis</a></li>
<li><a class="" href="sentiment-analysis.html"><span class="header-section-number">7</span> Sentiment analysis</a></li>
<li><a class="" href="appendix.html">Appendix</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="the-first-appendix.html"><span class="header-section-number">A</span> The First Appendix</a></li>
<li><a class="" href="the-second-appendix-for-fun.html"><span class="header-section-number">B</span> The Second Appendix, for Fun</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/ulyngs/oxforddown">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="text-mining-natural-language-processing-and-sentiment-analysis" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Text Mining, Natural Language Processing, and Sentiment Analysis<a class="anchor" aria-label="anchor" href="#text-mining-natural-language-processing-and-sentiment-analysis"><i class="fas fa-link"></i></a>
</h1>
<div id="reading-in-texts" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> 1 Reading in texts<a class="anchor" aria-label="anchor" href="#reading-in-texts"><i class="fas fa-link"></i></a>
</h2>
<div id="txt-files" class="section level3" number="6.1.1">
<h3>
<span class="header-section-number">6.1.1</span> 1.1 txt files<a class="anchor" aria-label="anchor" href="#txt-files"><i class="fas fa-link"></i></a>
</h3>
<p>Here’s how you can read in one .txt file that is saved in the same location as this script (i.e. in the same folder on your computer):</p>
<p>If you want to read all files from a sub-folder, type the name of the folder followed by / and * to ask R to read in all files in that folder:</p>
</div>
<div id="preparing-data" class="section level3" number="6.1.2">
<h3>
<span class="header-section-number">6.1.2</span> 1.3 Preparing data<a class="anchor" aria-label="anchor" href="#preparing-data"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>convert name to ID numbers with more descriptive labels</li>
</ul>
</div>
</div>
<div id="tidy-text" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> 2 Tidy text<a class="anchor" aria-label="anchor" href="#tidy-text"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>One word per row, facilitates analysis</li>
<li>Token: “a meaningful unit of text, most often a word, that we are interested in using for further analysis”</li>
</ul>
<div id="the-unnest_tokens-function" class="section level3" number="6.2.1">
<h3>
<span class="header-section-number">6.2.1</span> 2.1 the unnest_tokens function<a class="anchor" aria-label="anchor" href="#the-unnest_tokens-function"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Easy to convert from full text to token per row with unnest_tokens()
Syntax: unnest_tokens(df, newcol, oldcol)</li>
<li>unnest_tokens() automatically removes punctuation and converts to lowercase (unless you set to_lower = FALSE)</li>
<li>by default, tokens are set to words, but you can also use token = “characters”, “ngrams”, “sentences”, “lines”, “regex”, “paragraphs”, and even “tweets” (which will retain usernames, hashtags, and URLs)</li>
</ul>
<pre><code>## readtext object consisting of 2858 documents and 0 docvars.
## # Description: df [2,858 × 3]
##   doc_id word       text     
##   &lt;fct&gt;  &lt;chr&gt;      &lt;chr&gt;    
## 1 1      p1         "\"\"..."
## 2 1      for        "\"\"..."
## 3 1      me         "\"\"..."
## 4 1      personally "\"\"..."
## 5 1      it         "\"\"..."
## 6 1      was        "\"\"..."
## # … with 2,852 more rows</code></pre>
</div>
<div id="removing-non-alphanumeric-characters" class="section level3" number="6.2.2">
<h3>
<span class="header-section-number">6.2.2</span> 2.2 Removing non-alphanumeric characters<a class="anchor" aria-label="anchor" href="#removing-non-alphanumeric-characters"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>str_extract is used to get rid of non-alphanumeric characters (because we don’t want to count <em>word</em> separately from word)</li>
</ul>
</div>
<div id="stop-words" class="section level3" number="6.2.3">
<h3>
<span class="header-section-number">6.2.3</span> 2.3 Stop words<a class="anchor" aria-label="anchor" href="#stop-words"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Stop words: very common, “meaningless” function words like “the”, “of” and “to” – not usually important in an analysis (i.e. to find out that the most common word in two books you are comparing is “the”)</li>
<li>tidytext has a built-in df called stop_words for English</li>
<li>remove these from your dataset with anti_join</li>
</ul>
<p>We can take a look:</p>
<pre><code>## # A tibble: 1,149 × 2
##    word        lexicon
##    &lt;chr&gt;       &lt;chr&gt;  
##  1 a           SMART  
##  2 a's         SMART  
##  3 able        SMART  
##  4 about       SMART  
##  5 above       SMART  
##  6 according   SMART  
##  7 accordingly SMART  
##  8 across      SMART  
##  9 actually    SMART  
## 10 after       SMART  
## # … with 1,139 more rows</code></pre>
<pre><code>## readtext object consisting of 821 documents and 0 docvars.
## # Description: df [821 × 3]
##   doc_id word       text     
##   &lt;fct&gt;  &lt;chr&gt;      &lt;chr&gt;    
## 1 1      personally "\"\"..."
## 2 1      nice       "\"\"..."
## 3 1      week       "\"\"..."
## 4 1      ive        "\"\"..."
## 5 1      feeling    "\"\"..."
## 6 1      chatbots   "\"\"..."
## # … with 815 more rows</code></pre>
<p>Define other stop words:</p>
<p>Break: Prepare your data with the steps above. 1) Unnest tokens, 2) Remove alpha-numeric characters, 3) Remove stopwords</p>
</div>
</div>
<div id="analysing-frequencies" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> 3 Analysing frequencies<a class="anchor" aria-label="anchor" href="#analysing-frequencies"><i class="fas fa-link"></i></a>
</h2>
<div id="find-most-frequent-words" class="section level3" number="6.3.1">
<h3>
<span class="header-section-number">6.3.1</span> 3.1 Find most frequent words<a class="anchor" aria-label="anchor" href="#find-most-frequent-words"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Easily find frequent words using count()</li>
<li>Data must be in tidy format (one token per line)</li>
<li>sort = TRUE to show the most frequent words first</li>
</ul>
<p>tidy_books %&gt;%
count(word, sort = TRUE)</p>
<pre><code>## # A tibble: 387 × 3
## # Groups:   doc_id [1]
##    doc_id word              n
##    &lt;fct&gt;  &lt;chr&gt;         &lt;int&gt;
##  1 1      vr               15
##  2 1      cybersecurity    11
##  3 1      information      11
##  4 1      presentation      9
##  5 1      helpful           8
##  6 1      idea              7
##  7 1      ideas             7
##  8 1      lot               7
##  9 1      workshop          7
## 10 1      beginning         6
## # … with 377 more rows</code></pre>
<pre><code>## # A tibble: 388 × 3
## # Groups:   doc_id [1]
##    doc_id word              n
##    &lt;fct&gt;  &lt;chr&gt;         &lt;int&gt;
##  1 1      vr               15
##  2 1      cybersecurity    11
##  3 1      information      11
##  4 1      presentation      9
##  5 1      helpful           8
##  6 1      understand        8
##  7 1      idea              7
##  8 1      ideas             7
##  9 1      lot               7
## 10 1      workshop          7
## # … with 378 more rows</code></pre>
<div id="plotting-word-frequencies---bar-graphs" class="section level4" number="6.3.1.1">
<h4>
<span class="header-section-number">6.3.1.1</span> Plotting word frequencies - bar graphs<a class="anchor" aria-label="anchor" href="#plotting-word-frequencies---bar-graphs"><i class="fas fa-link"></i></a>
</h4>
<p>Bar graph of top words in CEPEHQ.</p>
<div class="inline-figure">Basic graph:
<img src="_main_files/figure-html/unnamed-chunk-17-1.png" width="672">
</div>
<div class="inline-figure">Readable labels:
<img src="_main_files/figure-html/unnamed-chunk-18-1.png" width="672">
</div>
<div class="inline-figure">Descending order:
<img src="_main_files/figure-html/unnamed-chunk-19-1.png" width="672">
</div>
<div class="inline-figure">Axis names and colors:
<img src="_main_files/figure-html/unnamed-chunk-20-1.png" width="672">
</div>
<div class="inline-figure">Or: flip coordinate system to make more space for words
<img src="_main_files/figure-html/unnamed-chunk-21-1.png" width="672">
</div>
</div>
</div>
<div id="normalised-frequency" class="section level3" number="6.3.2">
<h3>
<span class="header-section-number">6.3.2</span> 3.2 Normalised frequency<a class="anchor" aria-label="anchor" href="#normalised-frequency"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>when comparing the frequencies of words from different texts, they are commonly normalised</li>
<li>convention in corpus linguistics: report the frequency per 1 million words</li>
<li>for shorter texts: per 10,000 or per 100,000 words</li>
<li>calculation: raw frequency * 1,000,000 / total numbers in text</li>
</ul>
<pre><code>## # A tibble: 1 × 2
## # Groups:   doc_id [1]
##   doc_id `sum(n)`
##   &lt;fct&gt;     &lt;int&gt;
## 1 1           696</code></pre>
<pre><code>## # A tibble: 386 × 2
##    word            pmw
##    &lt;chr&gt;         &lt;dbl&gt;
##  1 vr            217. 
##  2 cybersecurity 159. 
##  3 information   159. 
##  4 presentation  130. 
##  5 helpful       116. 
##  6 idea          101. 
##  7 ideas         101. 
##  8 lot           101. 
##  9 workshop      101. 
## 10 beginning      87.0
## # … with 376 more rows</code></pre>
<div id="plotting-normalised-frequency" class="section level4" number="6.3.2.1">
<h4>
<span class="header-section-number">6.3.2.1</span> Plotting normalised frequency<a class="anchor" aria-label="anchor" href="#plotting-normalised-frequency"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-figure">Now we can plot, for example, the 20 most frequent words (by pmw).
<img src="_main_files/figure-html/unnamed-chunk-23-1.png" width="672">
</div>
</div>
</div>
<div id="word-clouds" class="section level3" number="6.3.3">
<h3>
<span class="header-section-number">6.3.3</span> 3.3 Word clouds<a class="anchor" aria-label="anchor" href="#word-clouds"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure">Let’s visualise the most frequent words in a word cloud. Here, the size indicates the frequency, with words that occur more often being displayed in a larger font size, but this can also be used to visualise e.g. normalised frequency (pmw) or length or anything else you pass to the freq = part of the command.
<img src="_main_files/figure-html/unnamed-chunk-24-1.png" width="672">
</div>
</div>
</div>
<div id="comparing-the-vocabulary-of-texts" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> 4 Comparing the vocabulary of texts<a class="anchor" aria-label="anchor" href="#comparing-the-vocabulary-of-texts"><i class="fas fa-link"></i></a>
</h2>
<p>Next, we’ll create two graphs to compare the vocabulary of our texts. First, we focus on Alice’s Adventures and Anderson’s CEPEHQ. The newly created comp_2 data frame contains only the words and their frequencies in the two texts in two separate columns.</p>
<div id="comparing-two-texts" class="section level3" number="6.4.1">
<h3>
<span class="header-section-number">6.4.1</span> Comparing two texts<a class="anchor" aria-label="anchor" href="#comparing-two-texts"><i class="fas fa-link"></i></a>
</h3>
<pre><code>## # A tibble: 6 × 3
##   word            pmw     `1`
##   &lt;chr&gt;         &lt;dbl&gt;   &lt;dbl&gt;
## 1 access         43.5 0.00435
## 2 acquired       14.5 0.00145
## 3 add            14.5 0.00145
## 4 administrator  14.5 0.00145
## 5 advance        14.5 0.00145
## 6 advanced       14.5 0.00145</code></pre>
<div class="inline-figure">Now, we can plot the words. Their placement depends on the word frequencies. Additionally, colour coding shows how different the frequencies are - darker items are more similar in terms of their frequencies, lighter-coloured ones more frequent in one text compared to the other. We’ll discuss the interpretation in more detail once we’ve created the threeway comparison.
<img src="_main_files/figure-html/unnamed-chunk-26-1.png" width="672">
</div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="Discussion.html"><span class="header-section-number">5</span> Discussion</a></div>
<div class="next"><a href="sentiment-analysis.html"><span class="header-section-number">7</span> Sentiment analysis</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#text-mining-natural-language-processing-and-sentiment-analysis"><span class="header-section-number">6</span> Text Mining, Natural Language Processing, and Sentiment Analysis</a></li>
<li>
<a class="nav-link" href="#reading-in-texts"><span class="header-section-number">6.1</span> 1 Reading in texts</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#txt-files"><span class="header-section-number">6.1.1</span> 1.1 txt files</a></li>
<li><a class="nav-link" href="#preparing-data"><span class="header-section-number">6.1.2</span> 1.3 Preparing data</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tidy-text"><span class="header-section-number">6.2</span> 2 Tidy text</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#the-unnest_tokens-function"><span class="header-section-number">6.2.1</span> 2.1 the unnest_tokens function</a></li>
<li><a class="nav-link" href="#removing-non-alphanumeric-characters"><span class="header-section-number">6.2.2</span> 2.2 Removing non-alphanumeric characters</a></li>
<li><a class="nav-link" href="#stop-words"><span class="header-section-number">6.2.3</span> 2.3 Stop words</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#analysing-frequencies"><span class="header-section-number">6.3</span> 3 Analysing frequencies</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#find-most-frequent-words"><span class="header-section-number">6.3.1</span> 3.1 Find most frequent words</a></li>
<li><a class="nav-link" href="#normalised-frequency"><span class="header-section-number">6.3.2</span> 3.2 Normalised frequency</a></li>
<li><a class="nav-link" href="#word-clouds"><span class="header-section-number">6.3.3</span> 3.3 Word clouds</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#comparing-the-vocabulary-of-texts"><span class="header-section-number">6.4</span> 4 Comparing the vocabulary of texts</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#comparing-two-texts"><span class="header-section-number">6.4.1</span> Comparing two texts</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/ulyngs/oxforddown/blob/master/05-extensions.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/ulyngs/oxforddown/edit/master/05-extensions.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong><p><code>Feasibility and Acceptance of chatbots embedded in healthcare curricula</code>:</p></strong>" was written by –. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
